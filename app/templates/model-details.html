<template id="template-model-details">
  <div>

<!--    <pre>
      {{model | json}}
   </pre> -->
    <template v-if="(model.id === undefined)">
      <div class="col-lg-12">

        <h3>No run selected</h3>
      </div>
    </template>

    <template v-if="(model.id !== undefined)">

      <!-- model window for deletation -->
      <h3>Details for &ldquo;<strong>{{model.name}}</strong>&rdquo;</h3>

      <div class="row" id="scenario-list">

        <div class="column-header"></div>

        <div class="modal default-hidden fade " id="dialog-confirm-delete" tabindex="-1" role="dialog">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Remove model '<span id="dialog-remove-name"></span>'?</h4>
              </div>
              <div class="modal-body">
                <p>
                  Are you sure you want to remove this model?
                </p>

                <!-- warning which is shown if user also wants to delete additional files. -->
                <div class="msg-delete-extra alert alert-info" role="alert">
                  Additional files already generated by this models will also be deleted.
                </div>

              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-warning" id="dialog-remove-response-accept">Delete</button>
                <button type="button" class="btn btn-primary" id="dialog-remove-response-cancel" data-dismiss="modal">Cancel</button>
              </div>
            </div><!-- /.modal-content -->
          </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->

        <nav class="navbar navbar-default sidebar" role="navigation" id="model-details-navigation">
          <div class="container-fluid">

            <ul class="nav navbar-nav">
              <!-- Obsolete?
              <li>
                <a href="#/"><strong>Return to model list</strong>
                  <span class="pull-right hidden-xs showopacity glyphicon glyphicon-menu-left"></span>
                </a>
              </li>
              -->

              <li class="active">
                <a href="#model-summary" data-toggle="tab" >
                  Summary<span class="pull-right hidden-xs showopacity glyphicon glyphicon-info-sign"></span>
                </a>
              </li>

              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Graphs <span class="caret"></span><span class="pull-right hidden-xs showopacity glyphicon glyphicon-signal"></span></a>
                <ul class="dropdown-menu for-animate" role="menu">
                  <li><a href="#model-channel-network" data-toggle="tab">Channel network</a></li>
                  <li><a href="#model-delta-fringe" data-toggle="tab" data-animation="delta_fringe_images">Delta plain fringe</a></li>
                </ul>
              </li>

              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Actions <span class="caret"></span><span class="pull-right hidden-xs showopacity glyphicon glyphicon-cog"></span></a>
                <ul class="dropdown-menu forAnimate" role="menu">
                  <li><a href="#model-simulation-controller" data-toggle="tab">Simulation controls</a></li>
                  <li><a href="#model-download" data-toggle="tab">Download files</a></li>
                </ul>
              </li>

              <li><a href="#model-log" data-toggle="tab" >
                View log file<span  class="pull-right hidden-xs showopacity glyphicon glyphicon-th-list"></span></a>
              </li>

            </ul>
          </div>
        </nav>


        <!--  -->
        <!-- Tab panes -->
        <div class="tab-content col-lg-9" >
          <div role="tabpanel" class="tab-pane active fade in" id="model-summary">
            <div class="panel-body" v-if="model">
              <h2>Summary </h2>

              <table class="table-default">
                <tbody>
                  <tr>
                    <td>Name</td>
                    <td>{{model.name}} </td>
                  </tr>

                  <tr>
                    <td>Model files</td>
                    <td>View <a href="{{model.fileurl}}">working directory</a></td>
                  </tr>

                  <tr>
                    <td>Status</td>
                    <td><span class="label label-default">{{model.state | capitalize }}</span></td>
                  </tr>
                  <tr>
                    <td>Identification</td>
                    <td><span class="text-muted">{{ model.id }} {{ model.suid }} </span></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <div role="tabpanel" class="tab-pane fade" id="model-channel-network">
            <div class="panel-body" v-if="model.results">
              <pre>{{ model | json }}</pre>
              <h2>Channel network</h2>

              <div class="text-center"  v-show="model.results.channelNetworkFrames">


                <img v-bind:src="model.results.channelNetworkFrames[view.currentChannelNetworkFrame]" />

                <div>
                  <div class="btn-group">
                    <button class="btn btn-primary" v-on:click="previousImageFrame('delta_fringe_images')"><span class="glyphicon glyphicon-backward"></span></button>
                    <button class="btn btn-primary" v-show="isAnimating" v-on:click="stopImageFrame('delta_fringe_images')"><span class="glyphicon glyphicon-stop"></span></button>
                    <button class="btn btn-primary" v-show="isAnimating == false" v-on:click="playImageFrame('delta_fringe_images')"><span class="glyphicon glyphicon-play"></span></button>
                    <button class="btn btn-primary" v-on:click="nextImageFrame('delta_fringe_images')"><span class="glyphicon glyphicon-forward"></span></button>
                  </div>
                </div>
              </div>

              <h4>Background information</h4>

              <p>
                This graph shows the network of the channel [ ... ]
              </p>
            </div>
          </div>
          <div role="tabpanel" class="tab-pane fade" id="model-delta-fringe">
            <div class="panel-body" v-if="model.results">
              <h2>Delta plain fringe</h2>

              <div>

                <div class="text-center" v-if="model.results.deltaFringeFrames">
                  <img v-bind:src="animationFrame" />

                  <div>
                    <div class="btn-group">
                      <button class="btn btn-primary" v-on:click="previousImageFrame('delta_fringe_images')"><span class="glyphicon glyphicon-backward"></span></button>
                      <button class="btn btn-primary" v-show="isAnimating" v-on:click="stopImageFrame('delta_fringe_images')"><span class="glyphicon glyphicon-stop"></span></button>
                      <button class="btn btn-primary" v-show="isAnimating == false" v-on:click="playImageFrame('delta_fringe_images')"><span class="glyphicon glyphicon-play"></span></button>
                      <button class="btn btn-primary" v-on:click="nextImageFrame('delta_fringe_images')"><span class="glyphicon glyphicon-forward"></span></button>
                    </div>
                  </div>
                </div>


              </div>

              <h4>Background information</h4>

              <p>
                Delta plain fringe information [ ... ]
              </p>
            </div>
          </div>

          <div role="tabpanel" class="tab-pane fade" id="model-simulation-controller">
            <div class="panel-body">
              <h2>Simulation control</h2>
              <p>
                Please select an action to perform on this simulation
              </p>

              <button type="button" class="btn btn-labeled btn-success" v-bind:class="{ 'inputdisabled': isModelRunning}" id="simulation-control-start" v-on:click="startModel">
                <span class="btn-label"><i class="glyphicon glyphicon-ok"></i></span>
                Start
              </button>

              <button type="button" class="btn btn-labeled btn-danger" v-on:click="removeModel(model)">
                <span class="btn-label"><i class="glyphicon glyphicon-remove"></i></span>
                Abort
              </button>
              <input type="checkbox" value="1" id="simulation-control-check-delete-files" /> Also delete all simulation files
            </div>
          </div>

          <div role="tabpanel" class="tab-pane fade" id="model-download">
            <div class="panel-body">
              <h2>Download files</h2>
              <p>
                Please check what you would like to download. Your download will be a ZIP file which contains the requested files.
              </p>
              <p>
                Currently you can only dowload the generated output images.
              </p>
              <div class="form-group input-group">
                <span class="input-group-addon"><input type="checkbox" class="downloadoption" checked="checked" v-on:change="downloadOptionsChange()"></span>
                <span class="form-control">Download generated output images</span>
              </div>
              <div class="btn-group">
                <button class="form-control btn btn-primary" id="download-submit" v-on:click="downloadFiles()" value="">
                  Download
                </button>
              </div>
            </div>
          </div>

          <div role="tabpanel" class="tab-pane fade" id="model-log">
            <div class="panel-body">
              <h2>Log output</h2>

              <button class="btn btn-primary" type="button" id="btn-copy-log-output" data-clipboard-target="#model-log-output">
                Copy log
              </button>
              <button class="btn btn-primary" type="button" id="btn-refresh-log-output" v-on:click="fetchLog">
                Refresh log
              </button>

              <div id="model-log-output-wrap">
                <!-- fill this directly cause debugging views with 3MB text are a bit slow -->
                <pre>
                  <code id="model-log-output">
                    Nog log available.
                  </code>
                </pre>

              </div>
            </div>
          </div>
        </div>
      </div>
    </template>

  </div>
</template>
